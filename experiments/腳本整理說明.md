# Experiments è…³æœ¬æ•´ç†èªªæ˜

## æ•´ç†æ™‚é–“
2025-11-21 21:00

## æ•´ç†ç›®çš„
1. ç§»é™¤éæ™‚å’Œé‡è¤‡çš„å¯¦é©—è…³æœ¬
2. ä¿ç•™æ ¸å¿ƒè¨“ç·´å’Œåˆ†æè…³æœ¬
3. ç‚ºå¯¦é©—åŸ·è¡Œæä¾›æ¸…æ™°çš„è…³æœ¬çµæ§‹

---

## æ•´ç†çµæœ

### âœ… ä¿ç•™çš„æ ¸å¿ƒè…³æœ¬ (7 å€‹)

#### 1. æ¨¡å‹å®šç¾© (2 å€‹)
```
baselines.py                    # Baseline æ¨¡å‹ (BERT-CLS)
improved_models.py              # æ”¹é€²æ¨¡å‹ (Method 1-3: Hierarchical, HBL, IARN)
```

#### 2. è¨“ç·´è…³æœ¬ (2 å€‹)
```
train_from_config.py           â­ æ¨è–¦ä½¿ç”¨ (é…ç½®æ–‡ä»¶é©…å‹•)
train_multiaspect.py            # åº•å±¤è¨“ç·´è…³æœ¬
```

#### 3. å ±å‘Šç”Ÿæˆ (1 å€‹)
```
generate_comprehensive_report.py  # ç¶œåˆå ±å‘Šç”Ÿæˆå™¨ (æ”¯æŒæ‰€æœ‰æ¨¡å‹)
```

#### 4. è¨ºæ–·/æ¸¬è©¦ (2 å€‹)
```
test_iarn.py                    # IARN æ¨¡å‹å–®å…ƒæ¸¬è©¦
diagnose_hbl.py                 # HBL æ¬Šé‡è¨ºæ–·å·¥å…·
```

---

### ğŸ“¦ æ­¸æª”çš„è…³æœ¬ (2 å€‹)

ç§»å‹•åˆ° `experiments/archive/` ç›®éŒ„ï¼š

```
generate_baseline_report.py    # èˆŠçš„ baseline å ±å‘Šç”Ÿæˆå™¨
                                # å·²è¢« generate_comprehensive_report.py å–ä»£
                                # åŠŸèƒ½å—é™ï¼ˆåªç”Ÿæˆ baseline å ±å‘Šï¼‰

record_experiment_table.py      # èˆŠçš„å¯¦é©—è¡¨æ ¼è¨˜éŒ„è…³æœ¬
                                # åŠŸèƒ½éæ™‚ï¼Œå ±å‘Šæ ¼å¼ä¸ç¬¦ç•¶å‰éœ€æ±‚
                                # å·²è¢« generate_comprehensive_report.py å–ä»£
```

---

## è…³æœ¬çµæ§‹

### æ•´ç†å‰ (9 å€‹è…³æœ¬)
```
experiments/
â”œâ”€â”€ baselines.py
â”œâ”€â”€ diagnose_hbl.py
â”œâ”€â”€ generate_baseline_report.py       âŒ éæ™‚
â”œâ”€â”€ generate_comprehensive_report.py
â”œâ”€â”€ improved_models.py
â”œâ”€â”€ record_experiment_table.py         âŒ éæ™‚
â”œâ”€â”€ test_iarn.py
â”œâ”€â”€ train_from_config.py
â””â”€â”€ train_multiaspect.py
```

### æ•´ç†å¾Œ (7 å€‹æ ¸å¿ƒ + 2 å€‹æ­¸æª”)
```
experiments/
â”œâ”€â”€ README.md                          â­ æ–°å¢ï¼ˆè…³æœ¬ä½¿ç”¨æŒ‡å—ï¼‰
â”œâ”€â”€ è…³æœ¬æ•´ç†èªªæ˜.md                    â­ æ–°å¢ï¼ˆæœ¬æ–‡ä»¶ï¼‰
â”‚
â”œâ”€â”€ baselines.py                       # æ¨¡å‹å®šç¾©
â”œâ”€â”€ improved_models.py                 # æ¨¡å‹å®šç¾© (IARN ä¸»è¦è²¢ç»)
â”‚
â”œâ”€â”€ train_from_config.py              â­ æ¨è–¦è¨“ç·´è…³æœ¬
â”œâ”€â”€ train_multiaspect.py               # åº•å±¤è¨“ç·´è…³æœ¬
â”‚
â”œâ”€â”€ generate_comprehensive_report.py   # ç¶œåˆå ±å‘Šç”Ÿæˆ
â”‚
â”œâ”€â”€ test_iarn.py                       # IARN æ¸¬è©¦
â”œâ”€â”€ diagnose_hbl.py                    # HBL è¨ºæ–·
â”‚
â””â”€â”€ archive/                           # æ­¸æª”ç›®éŒ„
    â”œâ”€â”€ generate_baseline_report.py
    â””â”€â”€ record_experiment_table.py
```

---

## æ ¸å¿ƒè…³æœ¬åŠŸèƒ½å°æ¯”

| è…³æœ¬ | åŠŸèƒ½ | ç‹€æ…‹ | ä½¿ç”¨é »ç‡ |
|------|------|------|----------|
| `train_from_config.py` | é…ç½®æ–‡ä»¶è¨“ç·´ | â­ **æ¨è–¦** | é«˜ |
| `train_multiaspect.py` | åº•å±¤è¨“ç·´ | ç¶­è­·ä¸­ | ä¸­ï¼ˆè¢«èª¿ç”¨ï¼‰|
| `generate_comprehensive_report.py` | å…¨æ¨¡å‹å ±å‘Š | â­ **æ¨è–¦** | é«˜ |
| `improved_models.py` | IARN ç­‰æ¨¡å‹ | æ ¸å¿ƒ | é«˜ï¼ˆè¢«å°å…¥ï¼‰|
| `baselines.py` | Baseline æ¨¡å‹ | æ ¸å¿ƒ | ä¸­ï¼ˆè¢«å°å…¥ï¼‰|
| `test_iarn.py` | IARN æ¸¬è©¦ | èª¿è©¦ç”¨ | ä½ |
| `diagnose_hbl.py` | HBL è¨ºæ–· | èª¿è©¦ç”¨ | ä½ |

---

## æ¨è–¦ä½¿ç”¨æµç¨‹

### 1. è¨“ç·´æ–°æ¨¡å‹
```bash
# ä½¿ç”¨é…ç½®æ–‡ä»¶ï¼ˆæ¨è–¦ï¼‰
python experiments/train_from_config.py \
    --config configs/iarn_mams.yaml \
    --dataset mams
```

### 2. ç”Ÿæˆå ±å‘Š
```bash
# ç”ŸæˆåŒ…å«æ‰€æœ‰æ¨¡å‹çš„ç¶œåˆå ±å‘Š
python experiments/generate_comprehensive_report.py --dataset mams
```

### 3. æŸ¥çœ‹çµæœ
```bash
# æŸ¥çœ‹æ–‡å­—å ±å‘Š
cat results/ç¶œåˆå ±å‘Š_mams.txt

# æˆ–æŸ¥çœ‹ JSON çµæœ
cat results/improved/mams/{timestamp}/reports/experiment_results.json
```

### 4. èª¿è©¦/è¨ºæ–·
```bash
# æ¸¬è©¦ IARN
python experiments/test_iarn.py

# è¨ºæ–· HBL æ¬Šé‡
python experiments/diagnose_hbl.py --checkpoint path/to/checkpoint.pt
```

---

## æ­¸æª”è…³æœ¬è©³æƒ…

### `generate_baseline_report.py`
**åŠŸèƒ½**: ç”ŸæˆåªåŒ…å« baseline çš„å ±å‘Š

**è¢«å–ä»£åŸå› **:
- `generate_comprehensive_report.py` å·²åŒ…å«æ­¤åŠŸèƒ½
- åŠŸèƒ½å—é™ï¼Œç„¡æ³•å°æ¯” improved æ¨¡å‹
- å ±å‘Šæ ¼å¼èˆ‡ç•¶å‰éœ€æ±‚ä¸ç¬¦

**æ˜¯å¦éœ€è¦æ¢å¾©**: å¦ï¼ˆåŠŸèƒ½å·²å®Œå…¨è¢«å–ä»£ï¼‰

### `record_experiment_table.py`
**åŠŸèƒ½**: ç”Ÿæˆ Markdown æ ¼å¼çš„å¯¦é©—çµæœè¡¨æ ¼

**è¢«å–ä»£åŸå› **:
- `generate_comprehensive_report.py` æä¾›æ›´å®Œæ•´çš„å ±å‘Š
- Markdown æ ¼å¼ä¸å¦‚ç´”æ–‡å­—å ±å‘Šæ˜“æ–¼æŸ¥çœ‹
- åŠŸèƒ½è¨­è¨ˆåŸºæ–¼èˆŠçš„å¯¦é©—çµæ§‹

**æ˜¯å¦éœ€è¦æ¢å¾©**: å¦ï¼ˆéœ€æ±‚å·²æ”¹è®Šï¼‰

---

## æ¢å¾©æ­¸æª”è…³æœ¬

å¦‚éœ€æ¢å¾©æŸå€‹æ­¸æª”è…³æœ¬ï¼š
```bash
cd experiments
mv archive/script_name.py .
```

## å®Œå…¨åˆªé™¤æ­¸æª”

å¦‚ç¢ºå®šä¸éœ€è¦æ­¸æª”è…³æœ¬ï¼š
```bash
cd experiments
rm -rf archive/
```

---

## è…³æœ¬ä¾è³´é—œä¿‚åœ–

```
é…ç½®æ–‡ä»¶ (configs/*.yaml)
    â†“
train_from_config.py (æ¨è–¦å…¥å£)
    â†“
train_multiaspect.py (æ ¸å¿ƒè¨“ç·´é‚è¼¯)
    â†“
â”œâ”€ baselines.py (BERT-CLS)
â””â”€ improved_models.py (Hierarchical, HBL, IARN)
    â†“
models/ (BERT embedding, base model, etc.)
    â†“
results/ (è¨“ç·´çµæœ)
    â†“
generate_comprehensive_report.py (å ±å‘Šç”Ÿæˆ)
    â†“
results/ç¶œåˆå ±å‘Š_{dataset}.txt (æœ€çµ‚å ±å‘Š)
```

---

## ç•¶å‰å¯¦é©—ç‹€æ…‹

### MAMS æ•¸æ“šé›†çµæœ

| æ¨¡å‹ | å®šç¾©ä½ç½® | Test F1 | ç‹€æ…‹ |
|------|----------|---------|------|
| Baseline (BERT-CLS) | `baselines.py` | 0.8217 | âœ… |
| Method 1 (Hierarchical) | `improved_models.py:HierarchicalBERT` | 0.8349 | âœ… |
| Method 2 (HBL) | `improved_models.py:HierarchicalBERT_LayerAttn` | 0.7033 | âŒ å·²æ”¾æ£„ |
| Method 3 (IARN) | `improved_models.py:InterAspectRelationNetwork` | **0.8400** | â­ **æœ€ä½³** |

### æ ¸å¿ƒè²¢ç»
**Inter-Aspect Relation Network (IARN)**
- æ–‡ä»¶: `improved_models.py` (Line 466-699)
- é¡å: `InterAspectRelationNetwork`
- é…ç½®: `configs/iarn_mams.yaml`
- è¨“ç·´: `python experiments/train_from_config.py --config configs/iarn_mams.yaml --dataset mams`

---

## ç¶­è­·å»ºè­°

### æ·»åŠ æ–°è…³æœ¬æ™‚
1. åœ¨ `README.md` ä¸­è¨˜éŒ„åŠŸèƒ½
2. ç¢ºä¿å‘½åæ¸…æ™°ï¼ˆåŠŸèƒ½_ç›®çš„.pyï¼‰
3. æ·»åŠ  docstring èªªæ˜ç”¨é€”

### å»¢æ£„èˆŠè…³æœ¬æ™‚
1. ç§»å‹•åˆ° `archive/` è€Œéåˆªé™¤
2. æ›´æ–° `README.md`
3. è¨˜éŒ„åœ¨æœ¬æ–‡ä»¶ä¸­

### å®šæœŸæª¢æŸ¥
- æ¯å€‹æœˆæª¢æŸ¥ä¸€æ¬¡ archive/ ç›®éŒ„
- ç¢ºèªæ˜¯å¦å¯ä»¥æ°¸ä¹…åˆªé™¤
- ä¿æŒ experiments/ ç›®éŒ„ç°¡æ½”

---

**æ•´ç†äºº**: Assistant
**æ—¥æœŸ**: 2025-11-21
**ç•¶å‰éšæ®µ**: IARN å¯¦é©—å®Œæˆï¼Œè…³æœ¬çµæ§‹å„ªåŒ–å®Œæˆ
