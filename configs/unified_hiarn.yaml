# Unified-HIARN Configuration
# 統一配置：所有數據集使用相同的超參數
#
# Unified Hierarchical-IARN (統一模型)
# 核心創新：根據**數據集**的多面向比例自動選擇策略
#
# 策略選擇（數據集級別）：
#   - 多面向比例 > 閾值 (50%): 使用 IARN 模式 (aspect 間交互)
#   - 多面向比例 <= 閾值: 使用 Hierarchical 模式 (純階層特徵)
#
# 預期效果：
#   - Restaurants/Laptops (多面向<50%): 自動使用 Hierarchical，與獨立模型一致
#   - MAMS (多面向=100%): 自動使用 IARN，獲得 aspect 交互能力
#   - 統一模型，無需手動選擇

experiment_name: "unified_hiarn"

# 模型配置 (所有數據集統一)
model:
  improved: "unified_hiarn"
  bert_model: "bert-base-uncased"
  freeze_bert: false
  hidden_dim: 768
  dropout: 0.4  # 與獨立 Hierarchical 一致
  multi_aspect_threshold: 0.5  # 多面向比例閾值 (>50% 使用 IARN)

# 數據配置
data:
  use_augmented: false  # 統一模型不需要數據增強
  min_aspects: 2
  max_aspects: 8
  include_single_aspect: true
  virtual_aspect_mode: "overall"
  max_text_len: 128
  max_aspect_len: 10

# 訓練配置 (所有數據集統一)
training:
  batch_size: 32
  accumulation_steps: 1
  epochs: 30
  lr: 2.0e-5
  weight_decay: 0.01
  grad_clip: 1.0
  patience: 10
  seed: 42

  # 調度器
  use_scheduler: true
  warmup_ratio: 0.1

  # 損失函數 - 統一配置
  loss_type: "focal"
  focal_gamma: 2.0
  class_weights: "auto"  # 動態計算，根據數據集自動調整

  # Virtual aspect
  virtual_weight: 0.5
