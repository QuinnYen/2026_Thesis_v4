# Method 3: Inter-Aspect Relation Network (IARN) on MEMD-ABSA Books
# MEMD (Multi-Element Multi-Domain) 數據集 - Books 領域
#
# 核心創新：顯式建模多個 aspects 之間的交互關係
#
# Books 領域特點：
# - 訓練集: ~701 多面向樣本 (37.2% 原始樣本為多面向)
# - 常見 aspects: Book#General, Content#Plot, Book#Quality, Book#Author
# - 情感分佈: POS 為主，NEG 次之，NEU 最少
#
# 與 MAMS 對比：
# - MAMS: 100% 多面向，更適合 IARN
# - MEMD Books: 37.2% 多面向，驗證 IARN 泛化能力

experiment_name: "iarn_memd_books"

# 模型配置
model:
  improved: "iarn"  # Inter-Aspect Relation Network
  bert_model: "distilbert-base-uncased"
  freeze_bert: false
  hidden_dim: 768
  dropout: 0.3  # 較低 dropout，因為 attention 本身有正則化效果
  num_attention_heads: 4  # Aspect-to-Aspect Attention 的 head 數量

# 數據配置
data:
  use_augmented: false
  min_aspects: 2  # IARN 專為多 aspect 設計
  max_aspects: 8
  include_single_aspect: false  # 只使用多面向樣本
  virtual_aspect_mode: "none"
  max_text_len: 128
  max_aspect_len: 10

# 訓練配置
training:
  batch_size: 32
  accumulation_steps: 1
  epochs: 30
  lr: 2.0e-5  # 與 MAMS 保持一致
  weight_decay: 0.05  # 中等正則化
  grad_clip: 1.0
  patience: 12  # 相同的 patience
  seed: 42

  # 調度器
  use_scheduler: true
  warmup_ratio: 0.1

  # 損失函數 - 與 MAMS 保持一致以便公平對比
  loss_type: "focal"
  focal_gamma: 2.5
  class_weights: [1.0, 8.0, 1.0]  # Neutral 類別仍需加權

  # Virtual aspect
  virtual_weight: 0.5

# MEMD Books 特有說明
#
# 數據集統計 (min_aspects=2):
# - Train: 701 samples
# - Val: 77 samples (10% of train)
# - Test: 193 samples
#
# 多面向分佈:
# - 2 aspects: 72.4%
# - 3 aspects: 18.5%
# - 4+ aspects: 9.1%
#
# 預期性能:
# - 由於多面向比例較低 (37.2% vs MAMS 100%)
# - IARN 可能無法完全發揮優勢
# - 但仍可驗證模型的領域泛化能力
