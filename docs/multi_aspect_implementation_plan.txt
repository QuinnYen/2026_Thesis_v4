================================================================================
æ–¹æ¡ˆ B: Multi-Aspect æ•¸æ“šæ–¹æ¡ˆ - è©³ç´°å¯¦æ–½è¨ˆåŠƒ
================================================================================
ç”Ÿæˆæ™‚é–“: 2025-11-10

ã€æ ¸å¿ƒç†å¿µã€‘
å°‡ SemEval-2014 æ•¸æ“šå¾ aspect-level è½‰æ›ç‚º sentence-level multi-aspect
è®“ PMAC å’Œ IARM å‰µæ–°æ¨¡çµ„çœŸæ­£ç™¼æ®ã€Œçµ„åˆå¤šå€‹é¢å‘ã€çš„ä½œç”¨

================================================================================
ä¸€ã€æ•¸æ“šåˆ†æçµæœ
================================================================================

ã€SemEval-2014 Restaurant è¨“ç·´é›†çµ±è¨ˆã€‘

ç¸½å¥å­æ•¸: 3,041 å¥

Aspect åˆ†ä½ˆ:
  0 aspects:  1,020 å¥ (33.5%) â† å°‡è¢«éæ¿¾
  1 aspect:   1,023 å¥ (33.6%) â† å–® aspectï¼Œä½œç‚ºå°ç…§çµ„
  2 aspects:    572 å¥ (18.8%) â† Multi-aspect âœ“
  3 aspects:    269 å¥ (8.8%)  â† Multi-aspect âœ“
  4 aspects:    104 å¥ (3.4%)  â† Multi-aspect âœ“
  5+ aspects:    53 å¥ (1.7%)  â† Multi-aspect âœ“

é—œéµç™¼ç¾:
  âœ… 32.8% çš„å¥å­åŒ…å« 2+ aspects (998 å¥)
  âœ… 14.0% çš„å¥å­åŒ…å« 3+ aspects (426 å¥)
  âœ… æœ‰è¶³å¤ çš„ multi-aspect æ•¸æ“šè¨“ç·´æ¨¡å‹

ã€å…¸å‹ Multi-Aspect ç¯„ä¾‹ã€‘

ç¯„ä¾‹ 1: 2 aspects (positive + positive)
  Text: "Not only was the food outstanding, but the little perks were great."
  Aspects:
    - food â†’ positive
    - perks â†’ positive

  â†’ PMAC å¯ä»¥çµ„åˆ "food" å’Œ "perks" çš„èªç¾©
  â†’ IARM å¯ä»¥å»ºæ¨¡å…©è€…çš„é—œä¿‚ï¼ˆéƒ½æ˜¯æ­£é¢ï¼Œç›¸äº’å¢å¼·ï¼‰


ç¯„ä¾‹ 2: 3 aspects (mixed sentiments)
  Text: "The food is exceptional, with a capable kitchen which will proudly
         showcase its menu."
  Aspects:
    - food â†’ positive
    - kitchen â†’ positive
    - menu â†’ neutral

  â†’ PMAC å¯ä»¥æ¼¸é€²å¼çµ„åˆ 3 å€‹ aspects
  â†’ IARM å¯ä»¥æ•æ‰æƒ…æ„Ÿä¸€è‡´æ€§/å°æ¯”æ€§


ç¯„ä¾‹ 3: 7 aspects (è¤‡é›œæƒ…æ³)
  Text: "They did not have mayonnaise, forgot our toast, left out ingredients
         (cheese), burnt bacon..."
  Aspects:
    - mayonnaise â†’ negative
    - toast â†’ negative
    - cheese â†’ neutral
    - ingredients â†’ negative
    - bacon â†’ negative
    - plate â†’ neutral
    - omelet â†’ neutral

  â†’ æ¸¬è©¦æ¨¡å‹è™•ç†å¤§é‡ aspects çš„èƒ½åŠ›
  â†’ IARM å¯ä»¥å»ºæ¨¡è¤‡é›œçš„é—œä¿‚ç¶²çµ¡


================================================================================
äºŒã€æ•¸æ“šè½‰æ›æ–¹æ¡ˆ
================================================================================

ã€æ–¹æ¡ˆ 2.1: å®Œå…¨ Multi-Aspectï¼ˆæ¨è–¦ï¼‰ã€‘

ç­–ç•¥: åªä½¿ç”¨åŒ…å« 2+ aspects çš„å¥å­

æ•¸æ“šé‡:
  è¨“ç·´é›†: 998 å¥ (32.8% of 3041)
  æ¯å¥å¹³å‡ aspects: 2.8 å€‹
  ç¸½ aspect-sentiment pairs: ~2,800

å„ªé»:
  âœ… æ‰€æœ‰æ¨£æœ¬éƒ½èƒ½å±•ç¾ PMAC/IARM å‰µæ–°
  âœ… æ•¸æ“šä¸€è‡´æ€§é«˜
  âœ… è«–æ–‡æ•˜è¿°æ¸…æ™°

ç¼ºé»:
  âš ï¸ æ¨£æœ¬æ•¸æ¸›å°‘ (3061 â†’ 998)
  âš ï¸ è¨“ç·´é›£åº¦å¢åŠ ï¼ˆå¤šæ¨™ç±¤å­¸ç¿’ï¼‰

å¯¦ç¾:
  - éæ¿¾ 0 aspect å’Œ 1 aspect çš„å¥å­
  - ä¿ç•™ 2+ aspects å¥å­
  - æ§‹é€  multi-label æ•¸æ“šæ ¼å¼


ã€æ–¹æ¡ˆ 2.2: æ··åˆæ¨¡å¼ã€‘

ç­–ç•¥:
  - ä¸»è¦ä½¿ç”¨ 2+ aspects å¥å­ï¼ˆ998å¥ï¼‰
  - ä¿ç•™éƒ¨åˆ† 1 aspect å¥å­ç”¨æ–¼å°ç…§ï¼ˆ~500å¥ï¼‰
  - ç¸½è¨ˆ: ~1,500 å¥

1-aspect è™•ç†æ–¹å¼:
  é¸é … A: Paddingï¼ˆè£œé½Šï¼‰
    - åŸ: (text, [food]) â†’ [positive]
    - è£œé½Š: (text, [food, <PAD>]) â†’ [positive, <IGNORE>]

  é¸é … B: é‡è¤‡ï¼ˆDuplicationï¼‰
    - åŸ: (text, [food]) â†’ [positive]
    - é‡è¤‡: (text, [food, food]) â†’ [positive, positive]

  é¸é … C: è™›æ“¬ Aspectï¼ˆContextï¼‰
    - åŸ: (text, [food]) â†’ [positive]
    - æ·»åŠ : (text, [food, <OVERALL>]) â†’ [positive, <INFER>]

å„ªé»:
  âœ… æ¨£æœ¬æ•¸ç›¸å°å……è¶³
  âœ… ä¿ç•™å–®/å¤š aspect å°æ¯”
  âœ… è¨“ç·´æ›´ç©©å®š

ç¼ºé»:
  âš ï¸ æ•¸æ“šä¸ç´”ç²¹
  âš ï¸ Padding/é‡è¤‡å¯èƒ½å¼•å…¥å™ªè²

æ¨è–¦: é¸é … Cï¼ˆè™›æ“¬æ•´é«” aspectï¼‰


ã€æ–¹æ¡ˆ 2.3: æ•¸æ“šå¢å¼·ã€‘

åœ¨æ–¹æ¡ˆ 2.1 åŸºç¤ä¸Šï¼Œå°å–® aspect å¥å­é€²è¡Œå¢å¼·

ç­–ç•¥ A: Aspect Expansionï¼ˆé¢å‘æ“´å±•ï¼‰
  åŸå¥: "The food was excellent."
  åŸ aspect: food â†’ positive

  æ“´å±•:
    - food â†’ positive
    - food quality â†’ positive (ç´°åŒ–)
    - taste â†’ positive (ç›¸é—œå±¬æ€§)

ç­–ç•¥ B: Context Miningï¼ˆä¸Šä¸‹æ–‡æŒ–æ˜ï¼‰
  åŸå¥: "The food was excellent, we really enjoyed our meal."
  åŸ aspect: food â†’ positive

  æŒ–æ˜:
    - food â†’ positive
    - meal â†’ positive (å¾ä¸Šä¸‹æ–‡æ¨æ–·)

ç­–ç•¥ C: Cross-sentence Aggregationï¼ˆè·¨å¥èšåˆï¼‰
  å¥å­ 1: "The food was great." â†’ food: positive
  å¥å­ 2: "The service was slow." â†’ service: negative

  å¦‚æœå…©å¥ä¾†è‡ªåŒä¸€è©•è«–:
    èšåˆ: "The food was great. The service was slow."
         â†’ [food: positive, service: negative]

å„ªé»:
  âœ… æœ€å¤§åŒ–æ•¸æ“šåˆ©ç”¨
  âœ… å¢åŠ  multi-aspect æ¨£æœ¬æ•¸

ç¼ºé»:
  âš ï¸ å¯¦ç¾è¤‡é›œ
  âš ï¸ å¯èƒ½å¼•å…¥éŒ¯èª¤


ã€æ¨è–¦æ–¹æ¡ˆã€‘ğŸŒŸ

éšæ®µ 1: ä½¿ç”¨æ–¹æ¡ˆ 2.1ï¼ˆç´” multi-aspectï¼‰
  - å…ˆé©—è­‰æ¨¡å‹åœ¨ç´” multi-aspect å ´æ™¯ä¸‹çš„æ•ˆæœ
  - æ¨£æœ¬: 998 å¥

éšæ®µ 2: å¦‚æœè¨“ç·´ç©©å®šï¼Œè€ƒæ…®æ–¹æ¡ˆ 2.2ï¼ˆæ··åˆæ¨¡å¼ï¼‰
  - å¢åŠ å–® aspect æ¨£æœ¬ï¼ˆå¸¶è™›æ“¬æ•´é«” aspectï¼‰
  - æ¨£æœ¬: ~1,500 å¥

éšæ®µ 3: å¦‚æœéœ€è¦æ›´å¤šæ•¸æ“šï¼Œä½¿ç”¨æ–¹æ¡ˆ 2.3ï¼ˆæ•¸æ“šå¢å¼·ï¼‰


================================================================================
ä¸‰ã€æ•¸æ“šæ ¼å¼è¨­è¨ˆ
================================================================================

ã€ç•¶å‰æ ¼å¼ï¼ˆAspect-levelï¼‰ã€‘

å–®å€‹æ¨£æœ¬:
{
    'text': "The food was great but service was slow.",
    'aspect': "food",
    'label': 1  # positive
}

å•é¡Œ: åŒä¸€å¥è©±æ‹†æˆ 2 å€‹ç¨ç«‹æ¨£æœ¬ï¼Œä¸Ÿå¤±äº† aspects é–“çš„é—œä¿‚


ã€æ–°æ ¼å¼ï¼ˆSentence-level Multi-Aspectï¼‰ã€‘

å–®å€‹æ¨£æœ¬:
{
    'text': "The food was great but service was slow.",
    'aspects': ["food", "service"],
    'labels': [1, 0],  # [positive, negative]
    'num_aspects': 2,
    'aspect_positions': [(4, 8), (27, 34)]  # å¯é¸ï¼Œaspect åœ¨æ–‡æœ¬ä¸­çš„ä½ç½®
}

ç‰¹é»:
  âœ… ä¿ç•™å¥å­å®Œæ•´æ€§
  âœ… aspects ä¹‹é–“å¯ä»¥å»ºç«‹é—œä¿‚
  âœ… æ›´ç¬¦åˆçœŸå¯¦æ‡‰ç”¨å ´æ™¯


ã€Batch æ•¸æ“šçµæ§‹ã€‘

ç”±æ–¼æ¯å€‹å¥å­çš„ aspect æ•¸é‡ä¸åŒï¼Œéœ€è¦è™•ç†è®Šé•·å•é¡Œ

æ–¹æ¡ˆ A: Dynamic Batchingï¼ˆå‹•æ…‹æ‰¹æ¬¡ï¼‰
  - æ¯å€‹ batch å…§çš„å¥å­ aspect æ•¸é‡ç›¸è¿‘
  - ä¾‹å¦‚: Batch 1 å…¨æ˜¯ 2-aspectsï¼ŒBatch 2 å…¨æ˜¯ 3-aspects

æ–¹æ¡ˆ B: Padding to Maxï¼ˆè£œé½Šåˆ°æœ€å¤§å€¼ï¼‰
  - æ¯å€‹ batch è£œé½Šåˆ°æœ€å¤§ aspect æ•¸é‡
  - ä½¿ç”¨ mask æ¨™è¨˜æœ‰æ•ˆ aspects

  ç¯„ä¾‹:
    Sentence 1: 2 aspects â†’ pad to 4 â†’ [asp1, asp2, <PAD>, <PAD>]
    Sentence 2: 3 aspects â†’ pad to 4 â†’ [asp1, asp2, asp3, <PAD>]
    Mask:                              [[1, 1, 0, 0], [1, 1, 1, 0]]

æ–¹æ¡ˆ C: Fixed Max Aspectsï¼ˆå›ºå®šæœ€å¤§å€¼ï¼‰
  - è¨­å®šæœ€å¤§ aspect æ•¸é‡ï¼ˆå¦‚ 5 æˆ– 8ï¼‰
  - è¶…éçš„å¥å­æˆªæ–·æˆ–æ‹†åˆ†

æ¨è–¦: æ–¹æ¡ˆ Bï¼ˆPadding + Maskï¼‰ï¼Œéˆæ´»ä¸”é«˜æ•ˆ


ã€Tokenization ç­–ç•¥ã€‘

é¸é … 1: ç¨ç«‹ç·¨ç¢¼æ¯å€‹ aspect
```python
text_encoding = tokenizer(text, ...)  # [seq_len]
aspect_encodings = [
    tokenizer(aspect, ...) for aspect in aspects
]  # N x [aspect_len]
```

é¸é … 2: çµ±ä¸€ç·¨ç¢¼ï¼ˆæ¨è–¦ï¼‰
```python
# æ ¼å¼: [CLS] text [SEP] asp1 [SEP] asp2 [SEP] ... [SEP]
combined = f"{text} [SEP] {' [SEP] '.join(aspects)}"
encoding = tokenizer(combined, ...)

# è¨˜éŒ„æ¯å€‹ aspect çš„ä½ç½®
aspect_spans = [...]  # [(start1, end1), (start2, end2), ...]
```

å„ªé»:
  âœ… BERT å¯ä»¥åŒæ™‚çœ‹åˆ°æ‰€æœ‰ aspects å’Œæ–‡æœ¬
  âœ… åˆ©ç”¨ BERT çš„ä¸Šä¸‹æ–‡ç†è§£
  âœ… å¯¦ç¾ç°¡å–®


================================================================================
å››ã€æ¨¡å‹æ¶æ§‹èª¿æ•´
================================================================================

ã€ç•¶å‰æ¶æ§‹ï¼ˆSingle-Aspectï¼‰ã€‘

Input:
  - text: [batch, seq_len]
  - aspect: [batch, aspect_len]

Flow:
  text_emb, aspect_emb = BERT(text, aspect)
  â†’ AAHA(text_emb, aspect_emb)
  â†’ PMAC(composed)  # å–®å€‹å‘é‡
  â†’ IARM([composed])  # å–®å…ƒç´ åˆ—è¡¨
  â†’ Classifier â†’ [batch, 3]


ã€æ–°æ¶æ§‹ï¼ˆMulti-Aspectï¼‰ã€‘

Input:
  - text: [batch, seq_len]
  - aspects: [batch, max_aspects, aspect_len]
  - aspect_mask: [batch, max_aspects]  # æ¨™è¨˜æœ‰æ•ˆ aspects

Flow:
  # 1. BERT ç·¨ç¢¼
  text_emb = BERT(text)  # [batch, seq_len, 768]

  # 2. ç·¨ç¢¼æ¯å€‹ aspect
  aspect_embs = []
  for i in range(max_aspects):
      asp_emb = BERT(aspects[:, i, :])  # [batch, 768]
      aspect_embs.append(asp_emb)
  aspect_embs = torch.stack(aspect_embs, dim=1)  # [batch, max_aspects, 768]

  # 3. AAHA - ç‚ºæ¯å€‹ aspect æå–ä¸Šä¸‹æ–‡
  context_vectors = []
  for i in range(max_aspects):
      if aspect_mask[:, i].any():
          ctx = AAHA(text_emb, aspect_embs[:, i, :])  # [batch, 768]
          context_vectors.append(ctx)
  context_vectors = torch.stack(context_vectors, dim=1)  # [batch, N, 768]

  # 4. PMAC - æ¼¸é€²å¼çµ„åˆå¤šå€‹ aspectsï¼ˆå‰µæ–°æ ¸å¿ƒï¼ï¼‰
  composed = PMAC_MultiAspect(context_vectors, aspect_mask)
  # è¼¸å…¥: [batch, N, 768]
  # è¼¸å‡º: [batch, 768] æˆ– [batch, N, 768]

  # 5. IARM - å»ºæ¨¡ aspects é–“é—œä¿‚ï¼ˆå‰µæ–°æ ¸å¿ƒï¼ï¼‰
  enhanced = IARM(context_vectors, aspect_mask)
  # è¼¸å…¥: [batch, N, 768]
  # è¼¸å‡º: [batch, N, 768]

  # 6. åˆ†é¡ - ç‚ºæ¯å€‹ aspect é æ¸¬æƒ…æ„Ÿ
  logits = []
  for i in range(max_aspects):
      if aspect_mask[:, i].any():
          logit = Classifier(enhanced[:, i, :])  # [batch, 3]
          logits.append(logit)
  logits = torch.stack(logits, dim=1)  # [batch, N, 3]

Output:
  - logits: [batch, max_aspects, 3]
  - ä½¿ç”¨ aspect_mask éæ¿¾ç„¡æ•ˆä½ç½®


ã€PMAC å¤šé¢å‘çµ„åˆå¯¦ç¾ã€‘

```python
class PMACMultiAspect(nn.Module):
    """
    çœŸæ­£çš„å¤šé¢å‘æ¼¸é€²å¼çµ„åˆ
    """

    def forward(self, aspect_features, mask):
        """
        aspect_features: [batch, N, dim]
        mask: [batch, N]

        è¿”å›: [batch, N, dim] çµ„åˆå¾Œçš„è¡¨ç¤º
        """
        batch_size, num_aspects, dim = aspect_features.shape

        # æ–¹æ¡ˆ A: é †åºçµ„åˆ
        composed = aspect_features[:, 0, :]  # å¾ç¬¬ä¸€å€‹é–‹å§‹
        for i in range(1, num_aspects):
            if mask[:, i].any():
                # æ¼¸é€²å¼é–€æ§èåˆ
                composed = self.gated_fusion(composed, aspect_features[:, i, :])

        # å»£æ’­åˆ°æ‰€æœ‰ aspectsï¼ˆæ¯å€‹éƒ½ç²å¾—çµ„åˆä¿¡æ¯ï¼‰
        composed_expanded = composed.unsqueeze(1).expand(-1, num_aspects, -1)

        # æ®˜å·®é€£æ¥
        output = aspect_features + composed_expanded

        return output

        # æ–¹æ¡ˆ B: å…©å…©çµ„åˆï¼ˆæ›´è¤‡é›œï¼‰
        # ç‚ºæ¯å€‹ aspect çµ„åˆå…¶ä»–æ‰€æœ‰ aspects
        outputs = []
        for i in range(num_aspects):
            composed_i = aspect_features[:, i, :]
            for j in range(num_aspects):
                if i != j and mask[:, j].any():
                    composed_i = self.gated_fusion(
                        composed_i,
                        aspect_features[:, j, :]
                    )
            outputs.append(composed_i)

        return torch.stack(outputs, dim=1)
```


ã€IARM é—œä¿‚å»ºæ¨¡å¯¦ç¾ã€‘

```python
class IARMMultiAspect(nn.Module):
    """
    çœŸæ­£çš„é¢å‘é–“é—œä¿‚å»ºæ¨¡
    """

    def forward(self, aspect_features, mask):
        """
        aspect_features: [batch, N, dim]
        mask: [batch, N]

        è¿”å›: [batch, N, dim] é—œä¿‚å¢å¼·çš„è¡¨ç¤º
        """
        # æ–¹æ¡ˆ A: Transformerï¼ˆå…¨å±€é—œä¿‚ï¼‰
        # Multi-head self-attention
        enhanced = self.transformer(
            aspect_features,
            src_key_padding_mask=~mask
        )  # [batch, N, dim]

        return enhanced

        # æ–¹æ¡ˆ B: Graph Attention Networkï¼ˆåœ–çµæ§‹ï¼‰
        # æ§‹å»º aspect é—œä¿‚åœ–
        # ç¯€é»: æ¯å€‹ aspect
        # é‚Š: aspect ä¹‹é–“çš„é—œä¿‚

        adj_matrix = self.compute_adjacency(aspect_features, mask)
        # adj_matrix: [batch, N, N] é—œä¿‚å¼·åº¦

        enhanced = self.gat(aspect_features, adj_matrix)

        return enhanced

        # æ–¹æ¡ˆ C: Pairwise Interactionï¼ˆæˆå°äº¤äº’ï¼‰
        outputs = []
        for i in range(num_aspects):
            if not mask[:, i].any():
                outputs.append(aspect_features[:, i, :])
                continue

            # èˆ‡å…¶ä»–æ‰€æœ‰ aspects äº¤äº’
            interactions = []
            for j in range(num_aspects):
                if mask[:, j].any():
                    interaction = self.interaction_func(
                        aspect_features[:, i, :],
                        aspect_features[:, j, :]
                    )
                    interactions.append(interaction)

            # èšåˆäº¤äº’ä¿¡æ¯
            aggregated = torch.stack(interactions, dim=1).mean(dim=1)
            enhanced_i = aspect_features[:, i, :] + aggregated
            outputs.append(enhanced_i)

        return torch.stack(outputs, dim=1)
```


================================================================================
äº”ã€æå¤±å‡½æ•¸å’Œè¨“ç·´ç­–ç•¥
================================================================================

ã€æå¤±å‡½æ•¸ã€‘

æ–¹æ¡ˆ A: æ¨™æº–å¤šæ¨™ç±¤äº¤å‰ç†µ
```python
# logits: [batch, max_aspects, 3]
# labels: [batch, max_aspects]
# mask: [batch, max_aspects]

loss = 0
count = 0
for i in range(max_aspects):
    valid_mask = mask[:, i]
    if valid_mask.any():
        loss_i = F.cross_entropy(
            logits[valid_mask, i, :],
            labels[valid_mask, i]
        )
        loss += loss_i
        count += 1

loss = loss / count  # å¹³å‡æå¤±
```

æ–¹æ¡ˆ B: Focal Lossï¼ˆè™•ç†é¡åˆ¥ä¸å¹³è¡¡ï¼‰
```python
focal_loss = FocalLoss(gamma=1.5)
loss = focal_loss(
    logits.view(-1, 3),  # [batch*N, 3]
    labels.view(-1),     # [batch*N]
    mask.view(-1)        # [batch*N]
)
```

æ–¹æ¡ˆ C: åŠ å…¥å°æ¯”æå¤±ï¼ˆå¢å¼·å€åˆ†åº¦ï¼‰
```python
# ä¸»æå¤±ï¼šåˆ†é¡
cls_loss = cross_entropy(logits, labels, mask)

# è¼”åŠ©æå¤±ï¼šåŒå¥å­å…§ä¸åŒ aspects æ‡‰æœ‰ä¸åŒè¡¨ç¤º
# aspect_features: [batch, N, dim]
contrast_loss = contrastive_loss(aspect_features, mask)

# ç¸½æå¤±
total_loss = cls_loss + 0.1 * contrast_loss
```

æ¨è–¦: å…ˆç”¨æ–¹æ¡ˆ Aï¼Œå†å˜—è©¦æ–¹æ¡ˆ C


ã€è©•ä¼°æŒ‡æ¨™ã€‘

Aspect-level æŒ‡æ¨™ï¼ˆèˆ‡ç¾æœ‰å°æ¯”ï¼‰:
  - å±•é–‹æ‰€æœ‰ (sentence, aspect, label) ä¸‰å…ƒçµ„
  - è¨ˆç®—æº–ç¢ºç‡ã€F1ã€Precisionã€Recall
  - èˆ‡ç•¶å‰ aspect-level çµæœå°æ¯”

Sentence-level æŒ‡æ¨™ï¼ˆæ–°å¢ï¼‰:
  - Exact Match: æ‰€æœ‰ aspects éƒ½é æ¸¬æ­£ç¢ºçš„å¥å­æ¯”ä¾‹
  - Hamming Loss: å¹³å‡éŒ¯èª¤ aspect æ¯”ä¾‹
  - Multi-label F1: è€ƒæ…®æ‰€æœ‰ aspects çš„æ•´é«” F1

Cross-aspect åˆ†æï¼ˆå‰µæ–°é»ï¼‰:
  - åŒæƒ…æ„Ÿ aspects çš„æº–ç¢ºç‡ï¼ˆå¦‚éƒ½æ˜¯ positiveï¼‰
  - ç•°æƒ…æ„Ÿ aspects çš„æº–ç¢ºç‡ï¼ˆå¦‚ positive + negativeï¼‰
  - åˆ†æ IARM æ˜¯å¦èƒ½æ•æ‰æƒ…æ„Ÿå°æ¯”é—œä¿‚


================================================================================
å…­ã€å¯¦æ–½æ­¥é©Ÿï¼ˆè©³ç´°ä»£ç¢¼è¨ˆåŠƒï¼‰
================================================================================

ã€æ­¥é©Ÿ 1: æ•¸æ“šè™•ç†ï¼ˆ2-3 å°æ™‚ï¼‰ã€‘

1.1 å‰µå»º multi-aspect æ•¸æ“šåŠ è¼‰å™¨
  æ–‡ä»¶: data/semeval_multiaspect.py

  åŠŸèƒ½:
    - è§£æ XML
    - éæ¿¾å‡º 2+ aspects å¥å­
    - æ§‹é€  multi-aspect æ ¼å¼
    - å¯¦ç¾ padding å’Œ masking

1.2 å‰µå»º Dataset é¡
  æ–‡ä»¶: data/multiaspect_dataset.py

  åŠŸèƒ½:
    - __getitem__ è¿”å› multi-aspect batch
    - å‹•æ…‹ padding
    - BERT tokenization

1.3 æ¸¬è©¦æ•¸æ“šåŠ è¼‰
  - æ‰“å°å¹¾å€‹æ¨£æœ¬
  - é©—è­‰æ ¼å¼æ­£ç¢º


ã€æ­¥é©Ÿ 2: æ¨¡å‹ä¿®æ”¹ï¼ˆ3-4 å°æ™‚ï¼‰ã€‘

2.1 ä¿®æ”¹ HMACNetBERT
  æ–‡ä»¶: experiments/train_bert.py æˆ–æ–°å»º train_multiaspect.py

  ä¿®æ”¹é»:
    - forward æ¥å— [batch, N, ...] è¼¸å…¥
    - å¾ªç’°è™•ç†æ¯å€‹ aspect
    - è¿”å› [batch, N, 3] logits

2.2 å¯¦ç¾ PMAC Multi-Aspect
  æ–‡ä»¶: models/pmac_enhanced.py

  æ–°å¢:
    - forward_multi_aspect() æ–¹æ³•
    - æ¼¸é€²å¼çµ„åˆé‚è¼¯
    - å…©å…©äº¤äº’é‚è¼¯

2.3 å¯¦ç¾ IARM Multi-Aspect
  æ–‡ä»¶: models/iarm_enhanced.py

  ä¿®æ”¹:
    - æ”¯æŒ [batch, N, dim] è¼¸å…¥
    - Transformer/GAT é—œä¿‚å»ºæ¨¡
    - è¼¸å‡º [batch, N, dim]

2.4 æ¸¬è©¦æ¨¡å‹
  - æ§‹é€  dummy æ•¸æ“š
  - å‰å‘å‚³æ’­æ¸¬è©¦
  - é©—è­‰è¼¸å‡ºç¶­åº¦æ­£ç¢º


ã€æ­¥é©Ÿ 3: è¨“ç·´å¾ªç’°ä¿®æ”¹ï¼ˆ1-2 å°æ™‚ï¼‰ã€‘

3.1 ä¿®æ”¹æå¤±è¨ˆç®—
  - è™•ç† multi-label
  - æ‡‰ç”¨ mask

3.2 ä¿®æ”¹è©•ä¼°
  - Aspect-level metrics
  - Sentence-level metrics

3.3 ä¿®æ”¹ Trainer
  - é©é…æ–°æ•¸æ“šæ ¼å¼
  - æ›´æ–°æ—¥èªŒè¼¸å‡º


ã€æ­¥é©Ÿ 4: å¯¦é©—é‹è¡Œï¼ˆæ•¸å°æ™‚åˆ°æ•¸å¤©ï¼‰ã€‘

4.1 åŸºç·šå¯¦é©—
  å¯¦é©— 4.1a: ç•¶å‰ aspect-level æ¨¡å‹ï¼ˆå·²æœ‰ï¼‰
    æ•¸æ“š: 3061 æ¨£æœ¬
    çµæœ: 79.91% æº–ç¢ºç‡

  å¯¦é©— 4.1b: BERT Baseline on multi-aspect
    æ¨¡å‹: BERT â†’ Classifierï¼ˆæ¯å€‹ aspect ç¨ç«‹ï¼‰
    æ•¸æ“š: 998 å¥ multi-aspect
    ç›®çš„: å»ºç«‹ multi-aspect åŸºç·š

4.2 å‰µæ–°æ¨¡çµ„å¯¦é©—
  å¯¦é©— 4.2a: BERT + PMACï¼ˆç„¡ IARMï¼‰
    é©—è­‰ PMAC å¤šé¢å‘çµ„åˆçš„æ•ˆæœ

  å¯¦é©— 4.2b: BERT + IARMï¼ˆç„¡ PMACï¼‰
    é©—è­‰ IARM é—œä¿‚å»ºæ¨¡çš„æ•ˆæœ

  å¯¦é©— 4.2c: BERT + PMAC + IARMï¼ˆå®Œæ•´æ¨¡å‹ï¼‰
    é©—è­‰å…©å€‹æ¨¡çµ„çš„å”åŒæ•ˆæœ

4.3 æ¶ˆèå¯¦é©—
  - ä¸åŒæ•¸é‡çš„ aspectsï¼ˆ2, 3, 4+ï¼‰
  - ä¸åŒæƒ…æ„Ÿçµ„åˆï¼ˆå…¨æ­£ã€å…¨è² ã€æ··åˆï¼‰
  - åˆ†æå“ªäº›æƒ…æ³ä¸‹å‰µæ–°æ¨¡çµ„æœ€æœ‰æ•ˆ


ã€æ­¥é©Ÿ 5: åˆ†æå’Œè«–æ–‡æ’°å¯«ï¼ˆæ•¸å¤©ï¼‰ã€‘

5.1 æ€§èƒ½å°æ¯”
  - Multi-aspect vs Single-aspect
  - æœ‰/ç„¡ PMAC å°æ¯”
  - æœ‰/ç„¡ IARM å°æ¯”

5.2 æ¡ˆä¾‹åˆ†æ
  - é¸æ“‡æˆåŠŸæ¡ˆä¾‹å±•ç¤º PMAC çµ„åˆæ•ˆæœ
  - é¸æ“‡æˆåŠŸæ¡ˆä¾‹å±•ç¤º IARM é—œä¿‚å»ºæ¨¡
  - åˆ†æå¤±æ•—æ¡ˆä¾‹

5.3 å¯è¦–åŒ–
  - Attention å¯è¦–åŒ–
  - Aspect é—œä¿‚åœ–å¯è¦–åŒ–
  - PMAC çµ„åˆéç¨‹å¯è¦–åŒ–


================================================================================
ä¸ƒã€é æœŸçµæœå’Œè«–æ–‡è²¢ç»
================================================================================

ã€é æœŸæ€§èƒ½ã€‘

ä¿å®ˆä¼°è¨ˆ:
  Multi-aspect BERT Baseline: 82-84% (aspect-level accuracy)
  BERT + PMAC: 84-86%
  BERT + PMAC + IARM: 85-87%

å¦‚æœå‰µæ–°æ¨¡çµ„æœ‰æ•ˆï¼ˆç›®æ¨™ï¼‰:
  Multi-aspect å®Œæ•´æ¨¡å‹: 87-90%
  â†’ è¶…è¶Šç•¶å‰ SOTA (87.88%)
  â†’ æ¥è¿‘æœ€ä½³ SOTA (89.96%)


ã€è«–æ–‡å‰µæ–°é»ã€‘

å‰µæ–° 1: Sentence-level Multi-Aspect Modeling
  âœ… å•é¡Œ: ç¾æœ‰å·¥ä½œå¤§å¤šæ˜¯ aspect-levelï¼ˆç¨ç«‹é æ¸¬ï¼‰
  âœ… æ–¹æ³•: æå‡º sentence-level å»ºæ¨¡ï¼ˆè¯åˆé æ¸¬ï¼‰
  âœ… å„ªå‹¢: æ›´ç¬¦åˆçœŸå¯¦å ´æ™¯ï¼Œæ•æ‰ aspects é–“é—œä¿‚

å‰µæ–° 2: Progressive Multi-Aspect Composition (PMAC)
  âœ… å•é¡Œ: å¤šå€‹ aspects èªç¾©å¦‚ä½•æœ‰æ•ˆçµ„åˆï¼Ÿ
  âœ… æ–¹æ³•: æ¼¸é€²å¼é–€æ§èåˆï¼Œå¤šå°ºåº¦ç‰¹å¾µæå–
  âœ… å‰µæ–°: é¦–æ¬¡æå‡º aspect æ¼¸é€²çµ„åˆæ©Ÿåˆ¶

å‰µæ–° 3: Inter-Aspect Relation Modeling (IARM)
  âœ… å•é¡Œ: Aspects ä¹‹é–“çš„é—œä¿‚å¦‚ä½•å»ºæ¨¡ï¼Ÿ
  âœ… æ–¹æ³•: Transformer/GAT å»ºæ¨¡ aspect é—œä¿‚åœ–
  âœ… å‰µæ–°: é¡¯å¼å»ºæ¨¡æƒ…æ„Ÿä¸€è‡´æ€§/å°æ¯”æ€§

å‰µæ–° 4: ç«¯åˆ°ç«¯è¯åˆå­¸ç¿’
  âœ… å•é¡Œ: ç¨ç«‹é æ¸¬å¿½ç•¥å…¨å±€ä¿¡æ¯
  âœ… æ–¹æ³•: åŒæ™‚é æ¸¬æ‰€æœ‰ aspectsï¼Œå…±äº«è¡¨ç¤º
  âœ… å„ªå‹¢: è¨“ç·´æ•ˆç‡é«˜ï¼Œæ€§èƒ½æ›´å¥½


ã€æ‡‰ç”¨åƒ¹å€¼ã€‘

å¯¦éš›å ´æ™¯:
  è©•è«–: "é£Ÿç‰©å¾ˆæ£’ä½†æœå‹™å¾ˆæ…¢ï¼Œç’°å¢ƒä¸éŒ¯ã€‚"

  å‚³çµ±æ–¹æ³•ï¼ˆç¨ç«‹é æ¸¬ï¼‰:
    - "é£Ÿç‰©" â†’ positive
    - "æœå‹™" â†’ negative
    - "ç’°å¢ƒ" â†’ positive
    å•é¡Œ: æ¯å€‹ aspect ç¨ç«‹è™•ç†ï¼Œç„¡æ³•æ•æ‰å°æ¯”é—œä¿‚

  æ‚¨çš„æ–¹æ³•ï¼ˆè¯åˆé æ¸¬ï¼‰:
    - è¼¸å…¥æ‰€æœ‰ aspects: [é£Ÿç‰©, æœå‹™, ç’°å¢ƒ]
    - PMAC çµ„åˆèªç¾©
    - IARM å»ºæ¨¡é—œä¿‚ï¼ˆæ•æ‰ "ä½†æ˜¯" çš„è½‰æŠ˜ï¼‰
    - è¯åˆè¼¸å‡º: [positive, negative, positive]
    å„ªå‹¢: ç†è§£æ•´é«”èªç¾©ï¼Œæ›´æº–ç¢º


================================================================================
å…«ã€é¢¨éšªå’ŒæŒ‘æˆ°
================================================================================

ã€é¢¨éšª 1: æ•¸æ“šé‡æ¸›å°‘ã€‘
  å¾ 3061 â†’ 998 æ¨£æœ¬ (-67%)

  æ‡‰å°:
    - æ•¸æ“šå¢å¼·ï¼ˆæ–¹æ¡ˆ 2.3ï¼‰
    - é·ç§»å­¸ç¿’ï¼ˆé è¨“ç·´ BERT æ¬Šé‡ï¼‰
    - æ­£å‰‡åŒ–é˜²æ­¢éæ“¬åˆ

ã€é¢¨éšª 2: è¨“ç·´é›£åº¦å¢åŠ ã€‘
  Multi-label å­¸ç¿’æ¯” single-label è¤‡é›œ

  æ‡‰å°:
    - å…ˆåœ¨å¤§æ•¸æ“šä¸Šé è¨“ç·´
    - æ¼¸é€²å¼è¨“ç·´ï¼ˆå…ˆå–®å¾Œå¤šï¼‰
    - èª²ç¨‹å­¸ç¿’ï¼ˆå…ˆç°¡å–®å¥å­ï¼‰

ã€é¢¨éšª 3: è©•ä¼°æŒ‡æ¨™ä¸ä¸€è‡´ã€‘
  Multi-aspect çµæœé›£ä»¥èˆ‡ç¾æœ‰å·¥ä½œç›´æ¥å°æ¯”

  æ‡‰å°:
    - å±•é–‹ç‚º aspect-level é€²è¡Œå°æ¯”
    - æä¾›å…©ç¨®è©•ä¼°çµæœ
    - æ¸…æ™°èªªæ˜è©•ä¼°è¨­å®š

ã€é¢¨éšª 4: å¯¦ç¾è¤‡é›œåº¦ã€‘
  ä»£ç¢¼ä¿®æ”¹é‡å¤§ï¼Œèª¿è©¦å›°é›£

  æ‡‰å°:
    - æ¨¡å¡ŠåŒ–è¨­è¨ˆ
    - å……åˆ†æ¸¬è©¦æ¯å€‹çµ„ä»¶
    - é€æ­¥é›†æˆ


================================================================================
ä¹ã€æ™‚é–“è¦åŠƒ
================================================================================

ã€å¿«é€ŸåŸå‹ï¼ˆ3-5 å¤©ï¼‰ã€‘

Day 1: æ•¸æ“šè™•ç†
  - å¯¦ç¾ multi-aspect æ•¸æ“šåŠ è¼‰
  - æ¸¬è©¦æ•¸æ“šæ ¼å¼
  - çµ±è¨ˆåˆ†æ

Day 2: æ¨¡å‹ä¿®æ”¹ï¼ˆåŸºç¤ï¼‰
  - ä¿®æ”¹ forward æ”¯æŒ multi-aspect
  - ç°¡å–®çš„ PMAC/IARM å¯¦ç¾
  - æ¸¬è©¦å‰å‘å‚³æ’­

Day 3: è¨“ç·´åŸºç·š
  - Multi-aspect BERT Baseline
  - é©—è­‰æµç¨‹æ­£ç¢º
  - åˆæ­¥çµæœ

Day 4-5: å®Œæ•´å¯¦é©—
  - PMAC å¯¦é©—
  - IARM å¯¦é©—
  - å®Œæ•´æ¨¡å‹å¯¦é©—


ã€å®Œæ•´ç‰ˆï¼ˆ1-2 é€±ï¼‰ã€‘

Week 1: å¯¦ç¾å’Œèª¿è©¦
  - æ•¸æ“šè™•ç†ï¼ˆ1-2 å¤©ï¼‰
  - æ¨¡å‹ä¿®æ”¹ï¼ˆ2-3 å¤©ï¼‰
  - åˆæ­¥å¯¦é©—ï¼ˆ2-3 å¤©ï¼‰

Week 2: å„ªåŒ–å’Œåˆ†æ
  - è¶…åƒæ•¸èª¿å„ªï¼ˆ2-3 å¤©ï¼‰
  - æ¶ˆèå¯¦é©—ï¼ˆ2-3 å¤©ï¼‰
  - çµæœåˆ†æï¼ˆ1-2 å¤©ï¼‰


================================================================================
åã€ä¸‹ä¸€æ­¥è¡Œå‹•
================================================================================

ã€ç«‹å³é–‹å§‹ã€‘

é¸é … A: æˆ‘å¹«æ‚¨å¯¦ç¾åŸºç¤ç‰ˆæœ¬ï¼ˆæ¨è–¦ï¼‰
  â†’ å‰µå»º multi-aspect æ•¸æ“šåŠ è¼‰å™¨
  â†’ ä¿®æ”¹æ¨¡å‹æ”¯æŒ multi-aspect
  â†’ é‹è¡Œç¬¬ä¸€å€‹å¯¦é©—
  é è¨ˆæ™‚é–“: 2-3 å°æ™‚ç·¨ç¢¼ + æ•¸å°æ™‚è¨“ç·´

é¸é … B: æˆ‘æä¾›è©³ç´°ä»£ç¢¼æ¨¡æ¿
  â†’ æ‚¨è‡ªå·±å¯¦ç¾å’Œèª¿è©¦
  â†’ æˆ‘æä¾›æŒ‡å°å’Œç­”ç–‘
  é è¨ˆæ™‚é–“: 1-2 å¤©

é¸é … C: å…ˆåšç°¡åŒ–å¯¦é©—é©—è­‰å¯è¡Œæ€§
  â†’ åªä½¿ç”¨ 2-aspect å¥å­
  â†’ ç°¡åŒ–ç‰ˆ PMAC/IARM
  â†’ å¿«é€Ÿé©—è­‰æƒ³æ³•
  é è¨ˆæ™‚é–“: 1 å¤©


ã€æˆ‘çš„å»ºè­°ã€‘ğŸ’¡

1. å…ˆå¯¦æ–½é¸é … Cï¼ˆç°¡åŒ–å¯¦é©—ï¼‰
   - é©—è­‰ multi-aspect æ–¹å‘å¯è¡Œæ€§
   - 1 å¤©å…§çœ‹åˆ°çµæœ

2. å¦‚æœå¯è¡Œï¼Œå…¨åŠ›å¯¦æ–½é¸é … Aï¼ˆå®Œæ•´ç‰ˆæœ¬ï¼‰
   - å®Œæ•´å¯¦ç¾ PMAC + IARM
   - 1-2 é€±å®Œæˆ

3. è«–æ–‡é‡é»ï¼š
   - Multi-aspect modelingï¼ˆå‰µæ–°å ´æ™¯ï¼‰
   - PMAC/IARMï¼ˆå‰µæ–°æ–¹æ³•ï¼‰
   - æ€§èƒ½æå‡ + æ¡ˆä¾‹åˆ†æ


ã€æ‚¨éœ€è¦æ±ºå®šã€‘

Q1: è¦å…ˆåšç°¡åŒ–å¯¦é©—ï¼ˆé¸é … Cï¼‰é‚„æ˜¯ç›´æ¥å®Œæ•´å¯¦ç¾ï¼ˆé¸é … Aï¼‰ï¼Ÿ
Q2: æ•¸æ“šæ–¹æ¡ˆé¸æ“‡ï¼š2.1ï¼ˆç´” multi-aspectï¼‰é‚„æ˜¯ 2.2ï¼ˆæ··åˆæ¨¡å¼ï¼‰ï¼Ÿ
Q3: æ™‚é–“é ç®—ï¼šå¿«é€ŸåŸå‹ï¼ˆ3-5å¤©ï¼‰é‚„æ˜¯å®Œæ•´ç‰ˆï¼ˆ1-2é€±ï¼‰ï¼Ÿ

è«‹å‘Šè¨´æˆ‘æ‚¨çš„é¸æ“‡ï¼Œæˆ‘ç«‹å³é–‹å§‹å¹«æ‚¨å¯¦æ–½ï¼ğŸš€

================================================================================
