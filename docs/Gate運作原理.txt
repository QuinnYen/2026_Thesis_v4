ğŸ¯ Gate æ˜¯ä»€éº¼ï¼Ÿ
Gateï¼ˆé–€æ§ï¼‰ æ˜¯ä¸€å€‹ 0 åˆ° 1 ä¹‹é–“çš„æ•¸å€¼ï¼Œç”¨ä¾†æ§åˆ¶ã€ŒæŸå€‹ aspect æ˜¯å¦è¦å—åˆ°å¦ä¸€å€‹ aspect çš„å½±éŸ¿ã€ã€‚
ğŸ“Š é‹ä½œæ©Ÿåˆ¶
1. Gate çš„è¨ˆç®—éç¨‹
å‡è¨­æœ‰ä¸€å€‹é¤å»³è©•è«–ï¼ŒåŒ…å« 3 å€‹ aspectsï¼š
Aspects = [food, service, ambiance]
å°æ–¼ food aspectï¼Œè¦æ±ºå®šå®ƒæ˜¯å¦å— service å’Œ ambiance å½±éŸ¿ï¼š
# å°æ–¼ food (aspect_i)ï¼š

# è¨ˆç®— food â† service çš„ gate
gate_input = concat([food_repr, service_repr])  # æ‹¼æ¥å…©å€‹ç‰¹å¾µ
gate_logit = Gate_Network(gate_input)           # MLP è¨ˆç®—
gate_foodâ†service = Sigmoid(gate_logit)         # å€¼åœ¨ 0-1 ä¹‹é–“

# è¨ˆç®— food â† ambiance çš„ gate  
gate_input = concat([food_repr, ambiance_repr])
gate_foodâ†ambiance = Sigmoid(Gate_Network(gate_input))
Gate çŸ©é™£ç¯„ä¾‹ï¼š
        å—åˆ°å½±éŸ¿ä¾†æº
           food  service  ambiance
ä¾†è‡ª   food    -    0.15      0.08
     service 0.12    -        0.45
    ambiance 0.05  0.42        -
è§£è®€ï¼š
gate[service][ambiance] = 0.45ï¼šservice æœƒä¸­åº¦å—åˆ° ambiance å½±éŸ¿
gate[food][service] = 0.15ï¼šfood è¼•å¾®å—åˆ° service å½±éŸ¿
gate[ambiance][food] = 0.05ï¼šambiance å¹¾ä¹ä¸å— food å½±éŸ¿

2. Gate å¦‚ä½•å½±éŸ¿ç‰¹å¾µçµ„åˆ
# å°æ–¼ food aspectï¼š
food_final = food_original + 
             gate_foodâ†service Ã— Composition(food, service) +
             gate_foodâ†ambiance Ã— Composition(food, ambiance)
å…·é«”æ•¸å€¼ç¯„ä¾‹ï¼š
food_original = [0.5, 0.8, 0.3, ...]  # åŸå§‹ç‰¹å¾µ

# Service çš„å½±éŸ¿
composition_food_service = [0.2, 0.1, 0.5, ...]
gate_foodâ†service = 0.15
influence_from_service = 0.15 Ã— [0.2, 0.1, 0.5, ...] = [0.03, 0.015, 0.075, ...]

# Ambiance çš„å½±éŸ¿
composition_food_ambiance = [0.1, 0.3, 0.2, ...]
gate_foodâ†ambiance = 0.08
influence_from_ambiance = 0.08 Ã— [0.1, 0.3, 0.2, ...] = [0.008, 0.024, 0.016, ...]

# æœ€çµ‚ç‰¹å¾µ
food_final = food_original + influence_from_service + influence_from_ambiance


ğŸ“ˆ Gate çµ±è¨ˆçµæœçš„æ„ç¾©
ç•¶è¨“ç·´å®Œæˆå¾Œï¼Œæ‚¨æœƒçœ‹åˆ°é€™æ¨£çš„çµ±è¨ˆï¼š
Selective PMAC Gate Statistics:
  Gate Mean: 0.1234 Â± 0.0876
  Gate Range: [0.0012, 0.8765]
  Gate Median: 0.0987
  Gate Q25-Q75: [0.0456, 0.1789]
  Sparsity (gate < 0.1): 68.5%
  Activation Rate (gate > 0.5): 5.2%
  Total Gates: 3840
å„é …æŒ‡æ¨™è§£é‡‹
æŒ‡æ¨™	æ„ç¾©	ç†æƒ³ç¯„åœ
Gate Mean	å¹³å‡ gate å€¼	0.1-0.3ï¼ˆè¡¨ç¤ºæ•´é«”å½±éŸ¿ä¸å¼·ï¼‰
Sparsity	gate < 0.1 çš„æ¯”ä¾‹	60-80%ï¼ˆé«˜ç¨€ç–æ€§ = aspects å¤§å¤šä¿æŒç¨ç«‹ï¼‰
Activation Rate	gate > 0.5 çš„æ¯”ä¾‹	5-15%ï¼ˆå°‘æ•¸å¼·é—œè¯ï¼‰
Gate Median	ä¸­ä½æ•¸	< 0.15ï¼ˆå¤§éƒ¨åˆ† gate å€¼è¼ƒå°ï¼‰
çµæœè§£è®€ç¯„ä¾‹
æƒ…æ³ 1ï¼šè‰¯å¥½çš„ç¨€ç–æ€§ âœ…
Gate Mean: 0.12
Sparsity: 72%
Activation Rate: 8%

è§£è®€ï¼š
- 72% çš„ aspect å°ä¹‹é–“å¹¾ä¹æ²’æœ‰å½±éŸ¿ï¼ˆgate < 0.1ï¼‰
- åªæœ‰ 8% æœ‰å¼·å½±éŸ¿ï¼ˆgate > 0.5ï¼‰
- è¡¨ç¤ºæ¨¡å‹å­¸æœƒäº†ã€Œé¸æ“‡æ€§çµ„åˆã€ï¼Œä¿æŒ aspects ç¨ç«‹æ€§
æƒ…æ³ 2ï¼šéåº¦çµ„åˆ âš ï¸
Gate Mean: 0.58
Sparsity: 15%
Activation Rate: 65%

è§£è®€ï¼š
- å¤§éƒ¨åˆ† aspects éƒ½åœ¨äº’ç›¸å½±éŸ¿
- å¤±å»äº† aspect-level åˆ†é¡çš„ç¨ç«‹æ€§
- å¯èƒ½éœ€è¦èª¿æ•´åˆå§‹åŒ–æˆ–å¢åŠ æ­£å‰‡åŒ–
æƒ…æ³ 3ï¼šå¹¾ä¹ä¸çµ„åˆ âš ï¸
Gate Mean: 0.02
Sparsity: 95%
Activation Rate: 0.1%

è§£è®€ï¼š
- å¹¾ä¹æ‰€æœ‰ gate éƒ½æ¥è¿‘ 0
- Selective PMAC é€€åŒ–æˆæ²’æœ‰çµ„åˆ
- å¯èƒ½éœ€è¦èª¿æ•´ gate åˆå§‹åŒ–
ğŸ” è¨“ç·´å ±å‘Šä¸­çš„å‘ˆç¾
åœ¨ training_report.txt ä¸­æœƒçœ‹åˆ°ï¼š
Gate Statistics:
  Gate Mean: 0.1234 Â± 0.0876
  Gate Range: [0.0012, 0.8765]
  Gate Median: 0.0987
  Gate Q25-Q75: [0.0456, 0.1789]
  Sparsity (gate < 0.1): 68.5%
  Activation Rate (gate > 0.5): 5.2%
  Total Gates: 3840

Interpretation:
  âœ“ High sparsity: Most aspects remain independent
  
  
ğŸ’¡ å¯¦éš›æ‡‰ç”¨æ„ç¾©
ç¯„ä¾‹ï¼šé¤å»³è©•è«–
è©•è«–ï¼š"The food was excellent but the service was terrible."

Aspects: [food, service, ambiance]
Labels:   [positive, negative, neutral]

Gate åˆ†æï¼š
- gate[food][service] = 0.08  â† food å¹¾ä¹ä¸å— service å½±éŸ¿ âœ…
- gate[service][food] = 0.12  â† service ä¹Ÿå¹¾ä¹ä¸å— food å½±éŸ¿ âœ…
- gate[ambiance][food] = 0.05 â† ambiance ä¿æŒç¨ç«‹ âœ…

çµæœï¼š
æ¯å€‹ aspect ç¨ç«‹åˆ†é¡ï¼Œäº’ä¸å¹²æ“¾
â†’ food: positive âœ“
â†’ service: negative âœ“
â†’ ambiance: neutral âœ“
å°æ¯”ï¼šå¦‚æœæ²’æœ‰ Selective Gate
å‚³çµ± PMACï¼ˆå¼·åˆ¶çµ„åˆæ‰€æœ‰ aspectsï¼‰ï¼š
- æ‰€æœ‰ aspects äº’ç›¸å½±éŸ¿
- food çš„ positive å¯èƒ½å½±éŸ¿ service çš„é æ¸¬
- å°è‡´ service è¢«éŒ¯èª¤é æ¸¬ç‚º neutral è€Œé negative âœ—


ğŸ“ è«–æ–‡ä¸­å¦‚ä½•å‘ˆç¾
Table: Selective PMAC Gate Statistics
Dataset	Mean	Median	Sparsity	Activation	Interpretation
SemEval Rest	0.123	0.098	72.3%	6.8%	High aspect independence
SemEval Laptop	0.145	0.112	68.9%	8.2%	Moderate composition
Visualization
å¯ä»¥ç•« Gate å€¼åˆ†ä½ˆç›´æ–¹åœ–ï¼š
å¤§éƒ¨åˆ† gate å€¼é›†ä¸­åœ¨ 0-0.2 ä¹‹é–“ï¼ˆç¨€ç–æ€§ï¼‰
å°‘æ•¸åœ¨ 0.5-1.0 ä¹‹é–“ï¼ˆé¸æ“‡æ€§çš„å¼·é—œè¯ï¼‰
é€™å°±æ˜¯ Gate çš„å®Œæ•´é‹ä½œæ©Ÿåˆ¶å’Œçµæœå‘ˆç¾ï¼ç¾åœ¨æ¸…æ¥šäº†å—ï¼Ÿ