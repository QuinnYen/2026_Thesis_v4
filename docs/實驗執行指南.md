# å¯¦é©—åŸ·è¡ŒæŒ‡å—

## ğŸ“Š æ”¯æŒçš„æ•¸æ“šé›†

ç³»çµ±ç¾åœ¨æ”¯æŒä¸‰å€‹æ•¸æ“šé›†ï¼š

| æ•¸æ“šé›† | æ¨£æœ¬æ•¸ | å¤šé¢å‘æ¯”ä¾‹ | é©ç”¨å ´æ™¯ | æ¨è–¦ç”¨é€” |
|--------|--------|-----------|---------|---------|
| **SemEval Restaurants** | ~1,500 | ~20% | ç°¡å–®å¤šé¢å‘ | è£œå……é©—è­‰ |
| **SemEval Laptops** | ~900 | ~18% | ç°¡å–®å¤šé¢å‘ | è£œå……é©—è­‰ |
| **MAMS**  | **4,297** | **100%** | çœŸå¯¦å¤šé¢å‘ | **ä¸»è¦å¯¦é©—** |


## æ•¸æ“šå¢å¼·ï¼ˆEDAï¼‰

å¢å¼·æ•¸æ“šå·²é å…ˆç”Ÿæˆï¼Œä½æ–¼ï¼š
- `data/augmented_restaurants/` - Restaurants å¢å¼·æ•¸æ“šï¼ˆ+83.6%ï¼‰
- `data/augmented_laptops/` - Laptops å¢å¼·æ•¸æ“šï¼ˆ+~80%ï¼‰

å¦‚éœ€é‡æ–°ç”Ÿæˆï¼š

```bash
# Restaurants æ•¸æ“šé›†
python data/augment_multiaspect.py --dataset restaurants --num_aug 2 --alpha 0.15 --output_dir data/augmented_restaurants

# Laptops æ•¸æ“šé›†
python data/augment_multiaspect.py --dataset laptops --num_aug 2 --alpha 0.15 --output_dir data/augmented_laptops
```

**åƒæ•¸èªªæ˜**ï¼š
- `--dataset`: æ•¸æ“šé›†é¸æ“‡ (restaurants æˆ– laptops)
- `--num_aug`: æ¯æ¨£æœ¬ç”Ÿæˆæ•¸é‡ï¼ˆ2 = æ¯æ¨£æœ¬å¢å¼· 2 æ¬¡ï¼‰
- `--alpha`: EDA å¼·åº¦ï¼ˆ0.15 = 15% å–®è©æœƒè¢«ä¿®æ”¹ï¼‰
- `--output_dir`: è¼¸å‡ºç›®éŒ„

## å¿«é€Ÿé–‹å§‹

**æ‰€æœ‰å‘½ä»¤éƒ½å¿…é ˆæŒ‡å®š `--dataset <restaurants|laptops|mams>` åƒæ•¸**

### MAMS æ•¸æ“šé›†å¯¦é©—

**ç‚ºä»€éº¼é¸ MAMSï¼Ÿ** 100% å¤šé¢å‘å ´æ™¯ï¼Œèƒ½çœŸæ­£å±•ç¾ PMAC + IARM å„ªå‹¢ï¼

```bash
# 1ï¸âƒ£ BERT Only baseline on MAMSï¼ˆå»ºç«‹åŸºæº–ï¼‰
python experiments/train_from_config.py --config configs/baseline_bert_only_mams.yaml --dataset mams

# 2ï¸âƒ£ Full Model (PMAC + IARM) on MAMSï¼ˆä¸»è¦æ¨¡å‹ï¼Œé æœŸé¡¯è‘—å„ªæ–¼ baselineï¼‰
python experiments/train_from_config.py --config configs/full_model_mams.yaml --dataset mams

# 3ï¸âƒ£ BERT + AAHA baseline on MAMSï¼ˆå°æ¯”å¯¦é©—ï¼‰
python experiments/train_from_config.py --config configs/baseline_bert_aaha_mams.yaml --dataset mams

# 4ï¸âƒ£ PMAC Only on MAMSï¼ˆæ¶ˆèå¯¦é©—ï¼Œè©•ä¼° IARM è²¢ç»ï¼‰
python experiments/train_from_config.py --config configs/pmac_only_mams.yaml --dataset mams
```


### æ–¹æ³• 1: SemEval æ•¸æ“šé›†å¯¦é©—ï¼ˆè£œå……é©—è­‰ï¼‰

**æ³¨æ„**ï¼šSemEval é…ç½®æ–‡ä»¶å·²é»˜èªå•Ÿç”¨æ•¸æ“šå¢å¼·å’Œå¹³è¡¡æ­£å‰‡åŒ–ã€‚

```bash
# åŸ·è¡Œå®Œæ•´æ¨¡å‹ï¼ˆPMAC + IARMï¼‰
python experiments/train_from_config.py --config configs/full_model_optimized.yaml --dataset restaurants
python experiments/train_from_config.py --config configs/full_model_optimized.yaml --dataset laptops

# åŸ·è¡Œ BERT Only baseline
python experiments/train_from_config.py --config configs/baseline_bert_only.yaml --dataset restaurants

# åŸ·è¡Œ BERT + AAHA baseline
python experiments/train_from_config.py --config configs/baseline_bert_aaha.yaml --dataset laptops

# åŸ·è¡Œ PMAC Onlyï¼ˆæ¶ˆèå¯¦é©—ï¼‰
python experiments/train_from_config.py --config configs/pmac_only.yaml --dataset restaurants
```

### æ–¹æ³• 2: æ‰¹æ¬¡å¤šé…ç½®æª”

**âš ï¸ æ³¨æ„ï¼šæ‰€æœ‰æ‰¹æ¬¡å‘½ä»¤éƒ½éœ€è¦æŒ‡å®š `--dataset` åƒæ•¸**

#### MAMS æ‰¹æ¬¡å¯¦é©—

```bash
# åŸ·è¡Œ MAMS æ‰€æœ‰ baselineï¼ˆBERT Only, BERT+AAHAï¼‰ä¸¦è‡ªå‹•ç”Ÿæˆå ±å‘Š
python run_experiments.py --baselines --dataset mams

# åŸ·è¡Œ MAMS æ‰€æœ‰å¯¦é©—ï¼ˆbaseline + full model + ablationï¼‰
python run_experiments.py --all --dataset mams

# åªåŸ·è¡Œ MAMS å®Œæ•´æ¨¡å‹
python run_experiments.py --full --dataset mams

# åŸ·è¡Œ MAMS æ¶ˆèå¯¦é©—ï¼ˆPMAC Onlyï¼‰
python run_experiments.py --ablation --dataset mams

# åªç”Ÿæˆ MAMS baseline æ¯”è¼ƒå ±å‘Šï¼ˆä¸åŸ·è¡Œè¨“ç·´ï¼‰
python run_experiments.py --report --dataset mams
```

**MAMS æ‰¹æ¬¡å¯¦é©—åŒ…å«**ï¼š
- **Baseline**: BERT Only, BERT + AAHA
- **Ablation**: PMAC Only (without IARM)
- **Full Model**: PMAC + IARM

#### SemEval æ‰¹æ¬¡å¯¦é©—ï¼ˆè£œå……é©—è­‰ï¼‰

```bash
# åŸ·è¡Œæ‰€æœ‰ baselineï¼ˆBERT Only, BERT+AAHA, BERT+Meanï¼‰ä¸¦è‡ªå‹•ç”Ÿæˆå ±å‘Š
python run_experiments.py --baselines --dataset restaurants
python run_experiments.py --baselines --dataset laptops

# åŸ·è¡Œæ‰€æœ‰å¯¦é©—ï¼ˆå«è‡ªå‹•ç”Ÿæˆå ±å‘Šï¼‰
python run_experiments.py --all --dataset restaurants
python run_experiments.py --all --dataset laptops

# åªåŸ·è¡Œå®Œæ•´æ¨¡å‹
python run_experiments.py --full --dataset restaurants
python run_experiments.py --full --dataset laptops

# åŸ·è¡Œæ¶ˆèå¯¦é©—
python run_experiments.py --ablation --dataset restaurants
python run_experiments.py --ablation --dataset laptops

# åªç”Ÿæˆ baseline æ¯”è¼ƒå ±å‘Šï¼ˆä¸åŸ·è¡Œè¨“ç·´ï¼‰
python run_experiments.py --report --dataset restaurants
python run_experiments.py --report --dataset laptops
```

**SemEval æ‰¹æ¬¡å¯¦é©—åŒ…å«**ï¼š
- **Baseline**: BERT Only, BERT + AAHA, BERT + Mean Pooling
- **Ablation**: PMAC Only (without IARM)
- **Full Model**: PMAC + IARM (Optimized)


## å¯¦é©—çµæœä½ç½®

- **å®Œæ•´æ¨¡å‹**: `results/experiments/YYYYMMDD_HHMMSS_pmac_iarm_*/`
- **Baseline**: `results/baseline/YYYYMMDD_HHMMSS_baseline_*/`

æ¯å€‹å¯¦é©—ç›®éŒ„åŒ…å«:
- `checkpoints/` - æ¨¡å‹æª¢æŸ¥é»
- `visualizations/` - è¨“ç·´æ›²ç·šå’Œ gate åˆ†æ
- `reports/` - å¯¦é©—å ±å‘Šå’Œé…ç½®

## çµ±ä¸€é…ç½®åƒæ•¸ï¼ˆ2025-11-19 æ›´æ–° v2ï¼‰

æ‰€æœ‰é…ç½®ä½¿ç”¨ç›¸åŒè¨“ç·´åƒæ•¸ï¼ˆç¢ºä¿å…¬å¹³æ¯”è¼ƒï¼‰ï¼š

| åƒæ•¸ | ç•¶å‰å€¼ (v2) | v1 (å·²æ£„ç”¨) | åŸå§‹å€¼ | èªªæ˜ |
|------|------------|------------|--------|------|
| `use_augmented` | âœ… **0.4** | 0.5 | âŒ false | å•Ÿç”¨ EDA æ•¸æ“šå¢å¼· |
| `dropout` | âš–ï¸ **0.4** | 0.5 | 0.3 | å¹³è¡¡æ­£å‰‡åŒ–ï¼ˆv1 éå¼·ï¼‰ |
| `weight_decay` | âœ… **0.05** | 0.05 | 0.01 | L2 æ­£å‰‡åŒ– |
| `label_smoothing` | âš–ï¸ **0.05** | 0.1 | - | è¼•åº¦å¹³æ»‘ï¼ˆv1 éå¼·ï¼‰ |
| `patience` | âš–ï¸ **12** | 8 | 10-20 | é¿å…éæ—©åœæ­¢ï¼ˆv1 å¤ªæ¿€é€²ï¼‰ |
| `epochs` | **30** | 30 | 30 | è¨“ç·´è¼ªæ•¸ï¼ˆä¸è®Šï¼‰ |
| `lr` | **2e-5** | 2e-5 | 2e-5 | å­¸ç¿’ç‡ï¼ˆä¸è®Šï¼‰ |
| `loss_type` | **focal** | focal | focal | Focal Lossï¼ˆä¸è®Šï¼‰ |
| `focal_gamma` | **2.5** | 2.5 | 2.5 | Focal gammaï¼ˆä¸è®Šï¼‰ |
| `class_weights` | **[1.0, 8.0, 1.0]** | [1.0, 8.0, 1.0] | [1.0, 8.0, 1.0] | é¡åˆ¥æ¬Šé‡ï¼ˆä¸è®Šï¼‰ |

**Batch Size å·®ç•°**ï¼ˆæ ¹æ“šæ¨¡å‹è¤‡é›œåº¦ï¼‰ï¼š
- BERT Only / Mean Pooling: 32
- BERT + AAHA: 24
- Full Model (PMAC + IARM): 32
- PMAC Only: 32

## ç”Ÿæˆ Baseline å ±å‘Š

**æ³¨æ„**ï¼šä½¿ç”¨ `python run_experiments.py --baselines` æœƒè‡ªå‹•ç”Ÿæˆå ±å‘Šï¼Œç„¡éœ€æ‰‹å‹•åŸ·è¡Œã€‚

å¦‚æœåªéœ€è¦é‡æ–°ç”Ÿæˆå ±å‘Šï¼ˆä¸åŸ·è¡Œè¨“ç·´ï¼‰:

```bash
# æ–¹æ³• 1: ä½¿ç”¨æ‰¹æ¬¡è…³æœ¬ï¼ˆæ¨è–¦ï¼‰
python run_experiments.py --report

# æ–¹æ³• 2: ç›´æ¥èª¿ç”¨å ±å‘Šç”Ÿæˆè…³æœ¬
python experiments/generate_baseline_report.py
```


## ğŸ“ å¯¦é©—çµæœè¨˜éŒ„

### è‡ªå‹•ç”Ÿæˆå°æ¯”è¡¨æ ¼

**ä¸€éµç”ŸæˆåŒ…å«æ‰€æœ‰å¯¦é©—ï¼ˆå« baseline å’Œ MAMSï¼‰çš„å°æ¯”è¡¨æ ¼ï¼š**

```bash
# è¨˜éŒ„æ‰€æœ‰å¯¦é©—ï¼ˆåŒ…æ‹¬ SemEval baseline + MAMSï¼‰
python experiments/record_experiment_table.py

# åªè¨˜éŒ„å®Œæ•´æ¨¡å‹å¯¦é©—
python experiments/record_experiment_table.py --only-full

# åªè¨˜éŒ„ baseline
python experiments/record_experiment_table.py --only-baseline

# æŒ‡å®šè¼¸å‡ºæª”æ¡ˆï¼ˆé è¨­ç‚º results/å¯¦é©—çµæœå ±å‘Š.mdï¼‰
python experiments/record_experiment_table.py --output results/MY_RESULTS.md
```