================================================================================
Unified-HIARN 實驗報告 - LAPTOPS Dataset
================================================================================

生成時間: 2025-11-25 01:47:36

--------------------------------------------------------------------------------
模型架構: Unified-HIARN (Method 4)
--------------------------------------------------------------------------------
  核心創新: 統一模型，根據**數據集**的多面向比例自動選擇策略

  策略選擇 (數據集級別):
    - 多面向比例 > 50%: 使用 IARN 模式 (aspect 間交互)
    - 多面向比例 <= 50%: 使用 Hierarchical 模式 (純階層特徵)

  Hierarchical 分支:
    - Low (layers 1-4): 詞彙特徵 → concat → fusion
    - Mid (layers 5-8): 語義特徵 → concat → fusion
    - High (layers 9-12): 任務特徵 → concat → fusion
    - 與獨立 HierarchicalBERT 架構完全一致

  IARN 分支:
    - Aspect-to-Aspect Attention + Relation-aware Gating

--------------------------------------------------------------------------------
實驗配置
--------------------------------------------------------------------------------
  Epochs:        30
  Patience:      10
  Learning Rate: 2e-5
  BERT Model:    BERT-base-uncased
  Optimizer:     AdamW
  Scheduler:     Cosine Annealing with Warmup (10%)
  Loss Type:     Focal Loss
  Focal Gamma:   2.0
  Class Weights: auto (動態計算)
  Dropout:       0.4

--------------------------------------------------------------------------------
實驗結果 (Main Results)
--------------------------------------------------------------------------------
  Accuracy:     75.00%
  Macro-F1:     69.93%
  Best Epoch:   13 / 30

--------------------------------------------------------------------------------
Per-class F1 Analysis
--------------------------------------------------------------------------------
  Negative F1:  70.64%
  Neutral F1:   52.94%
  Positive F1:  86.21%

--------------------------------------------------------------------------------
策略分析 (Dataset-level Strategy)
--------------------------------------------------------------------------------
  Unified-HIARN 使用數據集級別策略選擇:

  策略決定方式:
    1. 計算訓練集的多面向比例 (>=2 aspects 的樣本比例)
    2. 若比例 > 50%: 使用 IARN 模式 (aspect 間交互)
    3. 若比例 <= 50%: 使用 Hierarchical 模式 (純階層特徵)

  各數據集預期策略:
    - Restaurants/Laptops: ~30-40% 多面向 → Hierarchical 模式
    - MAMS: 100% 多面向 → IARN 模式

  優點:
    - 單一模型適應不同數據集特性
    - 低多面向數據集: 與獨立 Hierarchical 結果一致
    - 高多面向數據集: 獲得 aspect 間交互能力

--------------------------------------------------------------------------------
與 Baseline 對比
--------------------------------------------------------------------------------
Model                             Acc (%)   Macro-F1 (%)
--------------------------------------------------------------------------------
>>> Unified-HIARN (Method 4)        75.00          69.93
    Baseline (BERT-CLS)             75.22          69.63
--------------------------------------------------------------------------------

--------------------------------------------------------------------------------
改進分析 (vs Baseline)
--------------------------------------------------------------------------------
  Accuracy 提升:  -0.22%
  Macro-F1 提升:  +0.30% (+0.43% relative)
  Negative F1:    -0.03%
  Neutral F1:     +1.43%
  Positive F1:    -0.51%

  >>> Unified-HIARN 優於 Baseline (+0.30% Macro-F1)

--------------------------------------------------------------------------------
實驗目錄
--------------------------------------------------------------------------------
  Unified-HIARN: 20251125_014152_improved_unified_hiarn_llrd_drop0.4_bs32x1_focal

--------------------------------------------------------------------------------
結論
--------------------------------------------------------------------------------

Unified-HIARN 的設計目標:
  1. 統一模型: 無需針對不同數據集手動選擇模型
  2. 數據集自適應: 根據多面向比例自動選擇最佳策略
  3. 保持最優性能:
     - Restaurants/Laptops: 自動使用 Hierarchical，與獨立模型一致
     - MAMS: 自動使用 IARN，獲得 aspect 交互能力

================================================================================